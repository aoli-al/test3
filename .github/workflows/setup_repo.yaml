name: setup repo

on:
  create:

jobs:
  setup-repo:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - uses: actions/checkout@master

      - run: sed -i 's|{-ActivityLocation-}|https://activity-action.vercel.app/api/handler?repo=${{github.repository}}\&period=Project 2/2024-01-20T00:00:00-05:00/2024-03-29T23:59:00-05:00|g' README.md

      - uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: Update generated README
          branch: main
          push_options: '--force'
          commit_user_name: activity-action ðŸ¤–
          commit_user_email: actions@github.com
          commit_author: activity-action ðŸ¤– <actions@github.com>
          file_pattern: 'README.md'
      - uses: peterjgrainger/action-create-branch@v2.2.0
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          branch: 'activity-resources'
